import{B as L,_ as n}from"./preact.module-DSfP8QVG.js";import{c as x,A as _,y as d}from"./create-component-BQOTiC4n.js";import{I as B}from"./icon-cross-32-Dx8xq9TQ.js";import{c as F}from"./create-class-name-irFPZBOU.js";import{g as c}from"./get-current-from-ref-J2nPd355.js";import{g as H,c as R}from"./create-focus-trap-key-down-handler-DxXih0p5.js";import{I}from"./icon-button-jh4RbMrc.js";import{T as k}from"./text-akKGtnT_.js";const D="_modal_1pejl_1",K="_noTransition_1pejl_10",M="_center_1pejl_14",P="_open_1pejl_24",z="_bottom_1pejl_29",A="_left_1pejl_39",N="_right_1pejl_49",S="_topBar_1pejl_59",$="_closeButtonLeft_1pejl_69",q="_title_1pejl_73",C="_overlay_1pejl_78",r={modal:D,noTransition:K,center:M,open:P,bottom:z,left:A,right:N,topBar:S,closeButtonLeft:$,title:q,overlay:C},Z=x(function({children:y,closeButtonIcon:v=n(B,null),closeButtonPosition:w="right",open:l,transition:h=!0,onCloseButtonClick:u,onEscapeKeyDown:m,onOverlayClick:p,position:E="center",title:a,...g},b){const i=_(null),T=_([]),f=_(null);return d(function(){const e=document.createElement("div");return document.body.appendChild(e),i.current=e,function(){document.body.removeChild(e)}},[]),d(function(){const e=c(i),o=R(e);function t(s){l===!0&&o(s)}return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}},[l]),d(function(){function e(o){const t=c(T),s=c(i);l===!1||o.key!=="Escape"||typeof m>"u"||t[t.length-1]!==s||m(o)}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[l,m]),d(function(){const e=c(T),o=c(i),t=document.body;if(l===!0){if(e.length===0){const j=t.scrollHeight>window.innerHeight;t.style.cssText+=`position:fixed;overflow-y:${j===!0?"scroll":"hidden"};width:100%;`}e.push(o),o.style.cssText="position:absolute;top:0;left:0;bottom:0;right:0;z-index:1",f.current=document.activeElement;const s=H(o);s.length>0?s[0].focus():f.current.blur()}else e.length===1&&(t.style.removeProperty("position"),t.style.removeProperty("overflow-y"),t.style.removeProperty("width")),e.pop(),o.style.cssText="position:static";return function(){f.current!==null&&f.current.focus()}},[l]),d(function(){const e=c(i);L(n("div",{ref:b},n("div",{...g,class:F([r.modal,l===!0?r.open:null,h===!1?r.noTransition:null,r[E]])},y,typeof u>"u"&&typeof a>"u"?null:n("div",{class:r.topBar},n("div",{class:r.title},typeof a>"u"?null:n(k,null,n("strong",null,a))),typeof u>"u"?null:n("div",{class:w==="left"?r.closeButtonLeft:void 0},n(I,{onClick:u},v)))),n("div",{class:r.overlay,onClick:typeof p>"u"?void 0:p})),e)},[y,v,w,u,p,l,E,b,g,a,h]),null});export{Z as M};
