import{_ as d}from"./preact.module-DSfP8QVG.js";import{c as te,A as I,h as oe,q as F}from"./create-component-BQOTiC4n.js";import{c as $}from"./create-class-name-irFPZBOU.js";import{g as le}from"./get-current-from-ref-J2nPd355.js";import{n as C}from"./no-op-DX6rZLP_.js";import{R as ue}from"./raw-textbox-numeric-BsK585AJ.js";import{M as E,a as ie}from"./mixed-values-hkF2bnrF.js";const h="a-f\\d",se=`#?[${h}]{3}[${h}]?`,ae=`#?[${h}]{6}([${h}]{2})?`,ce=new RegExp(`[^#${h}]`,"gi"),Fe=new RegExp(`^${se}$|^${ae}$`,"i");function de(e,r={}){if(typeof e!="string"||ce.test(e)||!Fe.test(e))throw new TypeError("Expected a valid hex string");e=e.replace(/^#/,"");let o=1;e.length===8&&(o=Number.parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),e.length===4&&(o=Number.parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=Number.parseInt(e,16),i=t>>16,s=t>>8&255,a=t&255,c=typeof r.alpha=="number"?r.alpha:o;if(r.format==="array")return[i,s,a,c];if(r.format==="css"){const g=c===1?"":` / ${Number((c*100).toFixed(2))}%`;return`rgb(${i} ${s} ${a}${g})`}return{red:i,green:s,blue:a,alpha:c}}function N(e){if(e.length!==3&&e.length!==6)return null;try{const{red:r,green:o,blue:t}=de(e);return{b:t/255,g:o/255,r:r/255}}catch{return null}}const fe={aliceblue:"F0F8FF",antiquewhite:"FAEBD7",aqua:"00FFFF",aquamarine:"7FFFD4",azure:"F0FFFF",beige:"F5F5DC",bisque:"FFE4C4",black:"000000",blanchedalmond:"FFEBCD",blue:"0000FF",blueviolet:"8A2BE2",brown:"A52A2A",burlywood:"DEB887",cadetblue:"5F9EA0",chartreuse:"7FFF00",chocolate:"D2691E",coral:"FF7F50",cornflowerblue:"6495ED",cornsilk:"FFF8DC",crimson:"DC143C",cyan:"00FFFF",darkblue:"00008B",darkcyan:"008B8B",darkgoldenrod:"B8860B",darkgray:"A9A9A9",darkgreen:"006400",darkgrey:"A9A9A9",darkkhaki:"BDB76B",darkmagenta:"8B008B",darkolivegreen:"556B2F",darkorange:"FF8C00",darkorchid:"9932CC",darkred:"8B0000",darksalmon:"E9967A",darkseagreen:"8FBC8F",darkslateblue:"483D8B",darkslategray:"2F4F4F",darkslategrey:"2F4F4F",darkturquoise:"00CED1",darkviolet:"9400D3",deeppink:"FF1493",deepskyblue:"00BFFF",dimgray:"696969",dimgrey:"696969",dodgerblue:"1E90FF",firebrick:"B22222",floralwhite:"FFFAF0",forestgreen:"228B22",fuchsia:"FF00FF",gainsboro:"DCDCDC",ghostwhite:"F8F8FF",gold:"FFD700",goldenrod:"DAA520",gray:"808080",green:"008000",greenyellow:"ADFF2F",grey:"808080",honeydew:"F0FFF0",hotpink:"FF69B4",indianred:"CD5C5C",indigo:"4B0082",ivory:"FFFFF0",khaki:"F0E68C",lavender:"E6E6FA",lavenderblush:"FFF0F5",lawngreen:"7CFC00",lemonchiffon:"FFFACD",lightblue:"ADD8E6",lightcoral:"F08080",lightcyan:"E0FFFF",lightgoldenrodyellow:"FAFAD2",lightgray:"D3D3D3",lightgreen:"90EE90",lightgrey:"D3D3D3",lightpink:"FFB6C1",lightsalmon:"FFA07A",lightseagreen:"20B2AA",lightskyblue:"87CEFA",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"B0C4DE",lightyellow:"FFFFE0",lime:"00FF00",limegreen:"32CD32",linen:"FAF0E6",magenta:"FF00FF",maroon:"800000",mediumaquamarine:"66CDAA",mediumblue:"0000CD",mediumorchid:"BA55D3",mediumpurple:"9370DB",mediumseagreen:"3CB371",mediumslateblue:"7B68EE",mediumspringgreen:"00FA9A",mediumturquoise:"48D1CC",mediumvioletred:"C71585",midnightblue:"191970",mintcream:"F5FFFA",mistyrose:"FFE4E1",moccasin:"FFE4B5",navajowhite:"FFDEAD",navy:"000080",oldlace:"FDF5E6",olive:"808000",olivedrab:"6B8E23",orange:"FFA500",orangered:"FF4500",orchid:"DA70D6",palegoldenrod:"EEE8AA",palegreen:"98FB98",paleturquoise:"AFEEEE",palevioletred:"DB7093",papayawhip:"FFEFD5",peachpuff:"FFDAB9",peru:"CD853F",pink:"FFC0CB",plum:"DDA0DD",powderblue:"B0E0E6",purple:"800080",rebeccapurple:"663399",red:"FF0000",rosybrown:"BC8F8F",royalblue:"4169E1",saddlebrown:"8B4513",salmon:"FA8072",sandybrown:"F4A460",seagreen:"2E8B57",seashell:"FFF5EE",sienna:"A0522D",silver:"C0C0C0",skyblue:"87CEEB",slateblue:"6A5ACD",slategray:"708090",slategrey:"708090",snow:"FFFAFA",springgreen:"00FF7F",steelblue:"4682B4",tan:"D2B48C",teal:"008080",thistle:"D8BFD8",tomato:"FF6347",turquoise:"40E0D0",violet:"EE82EE",wheat:"F5DEB3",white:"FFFFFF",whitesmoke:"F5F5F5",yellow:"FFFF00",yellowgreen:"9ACD32"};function me(e){const r=fe[e.toLowerCase()];return typeof r>"u"?null:r}const be=(e,r,o,t)=>(o|r<<8|e<<16|1<<24).toString(16).slice(1)+t;function ge(e,r,o,t){let i=(e+(t||"")).toString().includes("%");if(typeof e=="string"&&!r){const s=pe(e);if(!s)throw new TypeError("Invalid or unsupported color format.");i=!1,[e,r,o,t]=s}else t!==void 0&&(t=Number.parseFloat(t));if(typeof e!="number"||typeof r!="number"||typeof o!="number"||e>255||r>255||o>255)throw new TypeError("Expected three numbers below 256");if(typeof t=="number"){if(!i&&t>=0&&t<=1)t=Math.round(255*t);else if(i&&t>=0&&t<=100)t=Math.round(255*t/100);else throw new TypeError(`Expected alpha value (${t}) as a fraction or percentage`);t=(t|256).toString(16).slice(1)}else t="";return be(e,r,o,t)}const pe=e=>{const r=e.replace(/rgba?\(([^)]+)\)/,"$1").split(/[,\s/]+/).filter(Boolean);if(r.length<3)return;const o=(c,g)=>(c=c.trim(),c.endsWith("%")?Math.min(Number.parseFloat(c)*g/100,g):Math.min(Number.parseFloat(c),g)),t=o(r[0],255),i=o(r[1],255),s=o(r[2],255);let a;return r.length===4&&(a=o(r[3],1)),[t,i,s,a]};function Ce(e){const{r,g:o,b:t}=e;if(r<0||r>1||o<0||o>1||t<0||t>1)return null;try{return ge(Math.round(r*255),Math.round(o*255),Math.round(t*255)).toUpperCase()}catch{return null}}function Ee(e){return N(e)!==null}function U(e,r){if(e===""||e===E||r===""||r===E)return null;const o=N(e);return o===null?null:{...o,a:parseInt(r,10)/100}}function T(e){const r=me(e);if(r!==null)return r;const o=De(e).toUpperCase();return Ee(o)===!1?null:o}function De(e){switch(e.length){case 0:return"";case 1:return Array(6).fill(e).join("");case 2:return Array(3).fill(e).join("");case 3:case 4:case 5:return`${e[0]}${e[0]}${e[1]}${e[1]}${e[2]}${e[2]}`;case 6:return e;default:return e.slice(0,6)}}function ye(e,r){const o=N(e);if(o===null)throw new Error("Invalid `hexColor`");const{r:t,g:i,b:s}=o,a=Ce({b:M(s,r),g:M(i,r),r:M(t,r)});if(a===null)throw new Error("Invalid `rgbColor`");return a}function M(e,r){const o=e*255+r;return Math.min(Math.max(o,0),255)/255}const Be="_textboxColor_69uub_1",Ae="_color_69uub_13",he="_disabled_69uub_24",we="_colorFill_69uub_28",_e="_colorBorder_69uub_33",ke="_hexColorSelector_69uub_48",He="_input_69uub_57",ve="_hexColorInput_69uub_80",xe="_opacityInput_69uub_84",Ie="_border_69uub_88",$e="_hasBorder_69uub_98",Te="_divider_69uub_109",Me="_underline_69uub_125",u={textboxColor:Be,color:Ae,disabled:he,colorFill:we,colorBorder:_e,hexColorSelector:ke,input:He,hexColorInput:ve,opacityInput:xe,border:Ie,hasBorder:$e,divider:Te,underline:Me},f="",Ge=te(function({disabled:e=!1,hexColor:r,hexColorPlaceholder:o,onHexColorInput:t=C,onHexColorKeyDown:i=C,onHexColorValueInput:s=C,onOpacityInput:a=C,onOpacityKeyDown:c=C,onOpacityNumericValueInput:g=C,onOpacityValueInput:z=C,onRgbaColorValueInput:D=C,opacity:w,opacityPlaceholder:O,propagateEscapeKeyDown:B=!0,revertOnEscapeKeyDown:A=!1,variant:H,...P},j){const S=I(null),G=I(null),_=I(!1),[b,y]=oe(f),m=F(function(n){const l=le(S);l.value=n;const p=new window.Event("input",{bubbles:!0,cancelable:!0});l.dispatchEvent(p)},[]),L=F(function(n){const l=n.currentTarget.value.slice(1).toUpperCase();y(l)},[]),V=F(function(n){const l=n.currentTarget.value.slice(1).toUpperCase();m(l)},[m]),X=F(function(n){n.key==="Escape"&&(A===!0&&(_.current=!0,m(b),y(f)),B===!1&&n.stopPropagation(),n.currentTarget.blur())},[b,B,A,m]),W=F(function(){if(_.current===!0){_.current=!1;return}if(r===f){b!==f&&m(b),y(f);return}if(r!==E){const n=T(r),l=n===null?b:n;l!==r&&m(l)}y(f)},[r,b,m]),Y=F(function(n){y(r),n.currentTarget.select()},[r]),J=F(function(n){t(n);const l=n.currentTarget.value;if(s(l),l===f){D(null);return}const p=T(l);if(p===null){D(null);return}const k=U(p,w);D(k)},[t,s,D,w]),K=F(function(n){i(n);const l=n.key;if(l==="Escape"){A===!0&&(_.current=!0,m(b),y(f)),B===!1&&n.stopPropagation(),n.currentTarget.blur();return}const p=n.currentTarget;if(l==="ArrowDown"||l==="ArrowUp"){n.preventDefault();const k=n.shiftKey===!0?10:1,ne=ye(r===f||r===E?l==="ArrowDown"?"FFFFFF":"000000":r,l==="ArrowDown"?-1*k:k);m(ne),p.select();return}n.ctrlKey===!0||n.metaKey},[r,i,b,B,A,m]),Q=F(function(n){r===E&&n.preventDefault()},[r]),Z=F(function(n){a(n);const l=n.currentTarget.value,p=U(r,l);D(p)},[r,a,D]),ee=F(function(n){g(n===null||n===ie?n:n/100)},[g]),re=F(function(n){return n!==null},[]),R=Ne(w),v=r!==f&&r!==E,q=v===!0?T(r):"FFFFFF",x=q===null?b:q;return d("div",{ref:j,class:$([u.textboxColor,typeof H>"u"?null:H==="border"?u.hasBorder:null,e===!0?u.disabled:null])},d("div",{class:u.color},d("div",{class:u.colorFill,style:v===!0?{backgroundColor:`#${x}`}:{}}),R===1?null:d("div",{class:u.colorFill,style:v===!0?{backgroundColor:`#${x}`,opacity:R}:{}}),d("div",{class:u.colorBorder})),d("input",{class:u.hexColorSelector,disabled:e===!0,onFocus:L,onInput:V,onKeyDown:X,tabIndex:-1,type:"color",value:`#${x}`}),d("input",{...P,ref:S,class:$([u.input,u.hexColorInput]),disabled:e===!0,onBlur:W,onFocus:Y,onInput:J,onKeyDown:K,onMouseUp:Q,placeholder:o,spellcheck:!1,tabIndex:0,type:"text",value:r===E?"Mixed":r}),d(ue,{ref:G,class:$([u.input,u.opacityInput]),disabled:e===!0,maximum:100,minimum:0,onInput:Z,onKeyDown:c,onNumericValueInput:ee,onValueInput:z,placeholder:O,propagateEscapeKeyDown:B,revertOnEscapeKeyDown:A,suffix:"%",validateOnBlur:re,value:w}),d("div",{class:u.divider}),d("div",{class:u.border}),H==="underline"?d("div",{class:u.underline}):null)});function Ne(e){return e===E||e===f?1:parseInt(e,10)/100}export{Ge as T};
